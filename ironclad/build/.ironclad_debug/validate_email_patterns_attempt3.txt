Phase: validate
Component: email_patterns
Attempt: 3
Message: Validation failed

RAW DATA:
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0
rootdir: /mnt/storage/tmp/tmph_v96rmf
plugins: anyio-4.12.0, cov-7.0.0, mock-3.15.1
collected 1 item

test_email_patterns.py F                                                 [100%]

=================================== FAILURES ===================================
_________________________ test_compile_email_patterns __________________________

    def test_compile_email_patterns():
        patterns = [
            'john.doe@example.com',
            '*@example.com',
            'j?hn@example.com',
            'admin.*@*.*',
            'user+name@domain.com'
        ]
        regexes = compile_email_patterns(patterns)
        assert len(regexes) == len(patterns)
        # Exact match
        assert regexes[0].match('john.doe@example.com')
        assert not regexes[0].match('john@example.com')
        # Wildcard *@example.com
        assert regexes[1].match('alice@example.com')
        assert not regexes[1].match('alice@other.com')
        # j?hn@example.com matches john and jahn
        assert regexes[2].match('john@example.com')
        assert regexes[2].match('jahn@example.com')
        assert not regexes[2].match('joohn@example.com')
        # admin.*@*.*
>       assert regexes[3].match('admin@domain.com')
E       AssertionError: assert None
E        +  where None = <built-in method match of re.Pattern object at 0x763b4b0ba8c0>('admin@domain.com')
E        +    where <built-in method match of re.Pattern object at 0x763b4b0ba8c0> = re.compile('^admin\\..*@.*\\..*$').match

test_email_patterns.py:24: AssertionError
=========================== short test summary info ============================
FAILED test_email_patterns.py::test_compile_email_patterns - AssertionError: ...
============================== 1 failed in 0.01s ===============================
